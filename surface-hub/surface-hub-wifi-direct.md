---
title: Surface Hub による Wi-Fi Direct のセキュリティ問題への対応
description: Wi-fi Direct security のリスクについてのガイダンス。
keywords: 変更履歴
ms.prod: surface-hub
ms.sitesec: library
author: dansimp
ms.author: dansimp
ms.topic: article
ms.date: 11/27/2019
ms.reviewer: ''
manager: laurawi
ms.localizationpriority: medium
ms.openlocfilehash: d877d9b6a4e330a74a9d79cf1150487d89c0da23
ms.sourcegitcommit: 109d1d7608ac4667564fa5369e8722e569b8ea36
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/27/2020
ms.locfileid: "10834998"
---
# Surface Hub による Wi-Fi Direct のセキュリティ問題への対応

Microsoft Surface Hub は、チームのブレーンストーミング、コラボレーション、アイデアの共有を通じて生産性向上を図るオール イン ワン型デバイスです。 Surface Hub は、Wi-fi Direct によるワイヤレスプロジェクションでは Miracast に依存しています。

この記事では、Wi-fi Direct security の脆弱性、Surface Hub がこれらのリスクにどのように対応するか、管理者が Surface Hub を最大限のセキュリティレベルで構成する方法について説明します。 この情報は、高度なセキュリティ要件を持つユーザーが、Surface Hub に接続されたネットワークと転送中のデータを保護するために役立ちます。

この記事の対象ユーザーは、最適なセキュリティ設定を使用して企業環境に Surface Hub を展開する IT とネットワーク管理者を対象としています。

## 概要

Surface Hub のセキュリティは、Wi-fi Direct/Miracast、および関連する802.11、Wi-fi Protected Access (WPA2)、およびワイヤレス保護されたセットアップ (WPS) 標準に依存しています。 このデバイスでサポートされるのは WPS (WPA2 事前共有キー [PSK] または WPA2 Enterprise) のみであるため、802.11 暗号化に関連する問題は単純化されています。

Surface Hub は、Miracast レシーバーのフィールドと同等に動作します。 したがって、すべての WPS ベースのワイヤレスネットワークデバイスと同様の攻撃を受ける可能性があります。 ただし、WPS の Surface Hub の実装には、追加の予防措置が組み込まれています。 また、Wi-fi Direct/Miracast レイヤーを突破した攻撃者が、ネットワークインターフェイスを経由して他の攻撃面や接続されている企業ネットワークに移動してしまうのを防ぐことができます。

## Wi-Fi Direct の背景情報

Miracast は、wi-fi Direct protocol でサポートされている Wi-fi ディスプレイ標準の一部です。 最新のモバイル デバイスでは、これらの規格をサポートすることで画面の共有とコラボレーションを実現しています。

Wi-fi Direct または Wi-fi "ピアツーピア" (P2P) は、"アドホック" ネットワーク向けの Wi-fi アライアンスの標準です ()。 サポートされているデバイスは、従来の Wi-fi アクセスポイントまたはインターネット接続なしで直接通信したり、ネットワークのグループを作成したりすることができます。

Wi-fi Direct のセキュリティは、WPS 標準で WPA2 によって提供されています。 デバイスの認証メカニズムは、数字の pin (WPS)、物理または仮想プッシュボタン (WPS-PBC)、または near field communication (WPS-OOO) などの帯域外メッセージです。 Surface Hub は、ピンメソッドとプッシュボタンメソッド (既定) をサポートしています。

Wi-fi Direct では、グループは次のいずれかの種類として作成されます。
- *永続的*(保存されているキーマテリアルを使用して自動再接続が行われる)
- *一時的*に、ユーザーの操作なしでデバイスを再認証できない

Wi-fi Direct groups は、確立された Wi-fi Direct グループの "駅" または "アクセスポイント" 機能を模倣したネゴシエーションプロトコルを通じて、*グループの所有者*(移動) を決定します。 Wi-fi Direct GO は、(「内部レジストラー」経由で) 認証を提供し、上流のネットワーク接続を容易にします。 Surface Hub の場合、この移動のネゴシエーションは発生しません。 ネットワークは "自律" モードでのみ動作し、Surface Hub は常にグループの所有者になります。 最後に、Surface Hub 自体は、クライアントとして他の Wi-fi Direct ネットワークに接続しません。

## Surface Hub で Wi-fi の直接の脆弱性に対処する方法

**Wi-fi Direct の招待、ブロードキャスト、検出プロセスの脆弱性と攻撃:** Wi-fi Direct/Miracast 攻撃は、グループ確立、ピア検出、デバイスブロードキャスト、または招待のプロセスの弱点をターゲットとする可能性があります。

|Wi-fi Direct の脆弱性 | Surface Hub の軽減 |
| --- | --- |
| 検出プロセスが長時間アクティブなままになることがあります。これにより、デバイス所有者の承認なしで招待と接続を確立することができます。 | Surface Hub は、グループの所有者としてのみ機能し、クライアント検出または移動ネゴシエーションのプロセスは実行されません。 ワイヤレスプロジェクションを完全に無効にして、ブロードキャストをオフにすることができます。 |
| PBC 経由の招待と検出により、認証されていない攻撃者が、繰り返し接続を実行するか、認証されていない接続が自動的に受け入れられます。 | WPS PIN セキュリティを要求することにより、管理者は、このような承認されていない接続または "招待爆弾" の可能性を減らすことができます。この場合、招待状は、ユーザーが誤って承認した場合に繰り返し送信されます。 |

**Wi-fi 保護されたセットアップ (WPS) プッシュボタン接続 (PBC) VS ピンエントリ:** WPS ピンのメソッドの設計と実装で公開弱点が実証されました。 WPS-PBC には、1回限りの使用を目的として設計されたプロトコルに対するアクティブな攻撃を可能にするその他の脆弱性があります。

| Wi-fi Direct の脆弱性 | Surface Hub の軽減 |
| --- | --- |
| WPS PBCは、アクティブな攻撃に対して脆弱です。 WPS の仕様の状態: "PBC メソッドは0ビットのエントロピーを持ち、受動的な盗聴攻撃からのみ保護されます。 PBC は傍受攻撃からデバイスを保護し、デバイス所有者が選択した以外のネットワークにデバイスが参加することを防止します。 ただし、認証がないということは、PBC がアクティブな攻撃から保護しないことを意味します。 " 攻撃者は、選択的なワイヤレス妨害やその他のサービス拒否技術を使って、意図しない Wi-fi Direct GO または接続をトリガーすることができます。 また、物理的な近接性のあるアクティブな攻撃者は、Wi-fi Direct グループを繰り返し破棄して、成功するまでその攻撃を試みることができます。 | Surface Hub 構成で WPS-PIN セキュリティを有効にします。 Wi-fi WPS 仕様の状態: "PBC メソッドは使用できません。 PIN 対応のレジストラーが利用可能であり、WLAN ユーザーが PBC に関連するリスクを受け入れることが許可されている場合のみ使用してください。" |
| WPS の実装には、WPS 規格の脆弱性を標的にしたブルートフォース攻撃の対象となる場合があります。 分割ピンの確認の設計は、一連の Wi-fi ハードウェア製造元の過去数年にわたる複数の実装の脆弱性に対応しています。 2011では、研究者シュテファン Viehböck および葛城 Heffner は、概念実証としての "" などの脆弱性とツールに関する情報をリリースしました。 |   Surface Hub での Microsoft の WPS の実装では、PIN が30秒ごとに変更されます。 PIN を破るために、攻撃者は、攻撃全体を30秒以内に完了する必要があります。 この分野でのツールと調査の現在の状態により、WPS を介したブルートフォースの PIN 解読攻撃が成功する可能性は低くなります。 |
| WPS-PIN は、脆弱な初期キー (E-S1、E S2) エントロピーのため、オフライン攻撃によって解読されることがあります。 2014では、Dominique Bongard によって、ワイヤレスデバイスの擬似乱数ジェネレーター (PRNG) の初期ランダム性の低下が、オフラインのブルートフォース攻撃で許可されていることを示しています。 | Surface Hub での Microsoft の WPS の実装は、このオフライン PIN のブルートフォース攻撃の影響を受けません。 WPS-PIN は接続ごとにランダム化されます。 |

**ネットワークサービスの意図しない公開:** イーサネットまたは WLAN サービス向けのネットワークデーモンは、構成が正しくないため ("すべて" または0.0.0.0 インターフェイスにバインドするなど)、誤って公開される可能性があります。 その他の原因として、デバイスファイアウォールが正しく設定されていないか、ファイアウォール規則が見つからない。

| Wi-fi Direct の脆弱性 | Surface Hub の軽減 |
| --- | --- |
| 構成の誤りによって、脆弱なまたは未認証のネットワーク サービスが、Wi-Fi Direct インターフェイスを含む "すべての" インターフェイスにバインドされます。 これにより、Wi-fi Direct クライアントがアクセスできなくなる可能性のあるサービスが公開されます。これは、弱く、または自動的に認証される場合があります。 | Surface Hub では、既定のファイアウォールルールには、必要な TCP と UDP のネットワークポートのみが許可され、既定ではすべての着信接続が拒否されます。 WPS PIN モードを有効にして、強力な認証を構成します。|

**Wi-fi Direct およびその他の有線またはワイヤレスネットワークのブリッジ:** WLAN またはイーサネットネットワーク間のネットワークブリッジは、Wi-fi Direct 仕様に違反しています。 このような間違った構成により、社内ネットワークのワイヤレスアクセス制御が効果的に低下または削除される可能性があります。

| Wi-fi Direct の脆弱性 | Surface Hub の軽減 |
| --- | --- |
| ブリッジされたネットワーク接続への未認証または不完全な認証のアクセスが、Wi-Fi Direct デバイスによって許可される可能性があります。 これにより、Wi-fi Direct ネットワークが、既存の IT セキュリティプロトコルに違反して、内部のイーサネット LAN またはその他のインフラストラクチャまたはエンタープライズ WLAN ネットワークにトラフィックをルーティングすることができます。 | Surface Hub は、ワイヤレスインターフェイスのブリッジや、異なるネットワーク間のルーティングを許可するように構成することはできません。 既定のファイアウォール規則は、このようなルーティングまたはブリッジ接続をさらにきめ細かく防御します。 |

**Wi-fi Direct "レガシー" モードの使用:** 意図しないネットワークまたはデバイスの露出は、"レガシー" モードで操作したときに発生する可能性があります。 WPS-PIN が有効でない場合、デバイスのスプーフィングや意図しない接続が行われる可能性があります。

| Wi-fi Direct の脆弱性 | Surface Hub の軽減 |
| --- | --- |
| Wi-Fi Direct と 802.11 インフラストラクチャ クライアントの両方をサポートすると、システムが "レガシ" サポート モードで動作します。 これにより、接続のセットアップフェーズが無期限に公開されることがあります。また、意図したセットアップフェーズが終了した後も、グループを参加させることができます。 |    Surface Hub は Wi-fi Direct レガシクライアントをサポートしていません。 WPS-PIN モードが有効な場合でも、Surface Hub に対して確立できるのは Wi-Fi Direct 接続のみです。 |

**接続のセットアップ時に Wi-fi DIRECT GO ネゴシエーション:** Wi-fi Direct のグループ所有者は、従来の802.11 ワイヤレスネットワークの "アクセスポイント" に似ています。 ネゴシエーションは、悪意のあるデバイスによって操作される可能性があります。

|Wi-fi Direct の脆弱性 |   Surface Hub の軽減 |
| --- | --- |
| グループが動的に確立されているか、Wi-fi Direct デバイスを使って新しいグループに参加できる場合、グループ所有者のネゴシエーションを、グループの所有者の "インテント" の最大値である "15" に設定している悪意のあるデバイスで受けることができます。 (ただし、デバイスが常にグループの所有者になるように構成されている場合、接続は失敗します)。  | Surface Hub は Wi-fi Direct "自律モード" を利用します。これにより、接続設定の GO ネゴシエーションフェーズがスキップされます。 Surface Hub は常にグループの所有者になります。 |

**意図しない、または悪意のある wi-fi deauthentication:** Wi-fi deauthentication は、従来の攻撃であり、ローカル攻撃者は、接続のセットアッププロセスでの情報漏洩の迅速化、新しい4方向ハンドシェイクのトリガー、アクティブな wi-fi Direct WPS-PBC の呼び出し、またはサービス拒否攻撃の作成を行うことができます。

| Wi-fi Direct の脆弱性 | Surface Hub の軽減 |
| --- | --- |
| Deauthentication パケットは、認証されていない攻撃者によって送信され、そのためにステーションが再認証を行い、最終的に発生したハンドシェイクをスニッフィングします。 さらに発生するハンドシェイクに対して、暗号化攻撃やブルートフォース攻撃を試みることができます。 このような攻撃を軽減するには、事前共有キーの長さと複雑さのポリシーの適用、deauthentication パケットのアクセスポイントの構成 (該当する場合)、WPS を使用した強力なキーの自動生成を行います。 PBC モードでは、ユーザーは物理ボタンまたは仮想ボタンを操作して、任意のデバイス関連付けを許可します。 このプロセスは、短時間のウィンドウ内でのセットアップでのみ発生します。 ボタンが自動的に "プッシュ" されると、デバイスは正規のピンの値 (すべてゼロ) で関連付けられたすべてのステーションを受け入れます。 認証解除によって、セットアップ プロセスの繰り返しを強制できます。 |   Surface Hub は、PIN または PBC モードで WPS を使用します。 PSK 構成は許可されません。 このメソッドは、強力なキーの生成を適用するのに役立ちます。 Surface Hub の WPS PIN セキュリティを有効にすることをお勧めします。 |
| サービス拒否攻撃に加えて、deauthentication パケットを使って、WPS に対してアクティブな攻撃のための機会のウィンドウを再び開くことができます。 |   Surface Hub 構成で WPS-PIN セキュリティを有効にします。 |

**基本的なワイヤレス情報の開示:** 802.11 またはそれ以外のワイヤレスネットワークでは、本質的に情報の漏えいのリスクがあります。 この情報はほとんどの場合、接続またはデバイスのメタデータですが、この問題は、802.11 ネットワーク管理者にとって既知のリスクを負うものとします。 WPS-PIN でデバイス認証を行う Wi-Fi Direct では、同じ情報が PSK や Enterprise 802.11 ネットワークとして提供されています。

| Wi-fi Direct の脆弱性 | Surface Hub の軽減 |
| --- | --- |
| ブロードキャスト、接続設定、または既に暗号化された接続の通常の操作では、デバイスとパケットサイズに関する基本情報はワイヤレスで送信されます。 基本的なレベルでは、ワイヤレス範囲内のローカル攻撃者は、関連する802.11 情報要素を調べて、ワイヤレスデバイスの名前、通信機器の MAC アドレス、ワイヤレススタックのバージョン、パケットサイズ、構成されているアクセスポイント、グループ所有者のオプションなどのその他の詳細情報を確認できます。  | Surface Hub で使用される Wi-fi Direct ネットワークは、802.11 Enterprise または PSK ワイヤレスネットワークの場合と同様に、メタデータのリークから保護することはできません。 ワイヤレス近接通信によって発生する可能性のある脅威の物理的なセキュリティと削除は、発生する可能性のある情報漏洩を減らすのに役立ちます。 |

**ワイヤレスの有害双発攻撃またはスプーフィング攻撃:** ワイヤレス名のスプーフィングは、悪意のあるユーザーにとって、悪意のあるユーザーにとって無防備な、または誤解を伴う可能性があるユーザーのために使用できる、シンプルで有名な攻略です。

| Wi-fi Direct の脆弱性 | Surface Hub の軽減 |
| --- | --- |
| 攻撃者は、ターゲットネットワークのワイヤレス名または "SSID" をスプーフィングまたは複製することによって、ユーザーが偽装された悪意のあるネットワークに接続するように仕向けることができます。 認証されていない自動結合 Miracast をサポートすることによって、攻撃者は、目的の表示内容をキャプチャしたり、接続デバイスでネットワーク攻撃を開始したりすることができます。 | スプーフィングされた Surface Hub への参加に対する特別な保護はありませんが、この脆弱性の一部は次の2つの方法で軽減されます。 まず、攻撃は物理的な Wi-Fi の通信範囲内から実行する必要があります。 次に、この攻撃は最初の接続中にのみ可能です。 以降の接続では永続的な Wi-fi ダイレクトグループが使用され、今後のハブでの使用時に、Windows はこの前の接続を記憶して優先順位を付けます。 (注: MAC アドレス、Wi-fi チャネル、SSID の同時スプーフィングは、このレポートに対して考慮されませんでした。また、Wi-fi の動作が不安定になることがあります)。全体的に、この弱点は、Wi-fi Direct でサポートされていないすべての802.11 ワイヤレスネットワークで、EAP-TLS や、EAP-PWD などのエンタープライズ WPA2 プロトコルを使用していない場合に発生します。 |

## Surface Hub のセキュリティ強化のガイドライン

Surface Hub は、コラボレーションが容易で、迅速かつ効率的に会議を開始し、参加できる環境の構築を目的としたデバイスです。 Surface Hub の既定の Wi-fi ダイレクト設定はこのシナリオに合わせて最適化されています。

その他のワイヤレスインターフェイスのセキュリティを確保するために、Surface Hub ユーザーは WPS-PIN セキュリティ設定を有効にする必要があります。 この設定では、WPS-PBC モードが無効になり、クライアント認証が提供されます。 Surface Hub への不正な接続を防止することで、最強レベルの保護を提供します。

Surface Hub の認証と承認についてまだ懸念事項がある場合は、デバイスを別のネットワークに接続することをお勧めします。 Wi-fi ("ゲスト" Wi-fi ネットワークなど)、または独立したイーサネットネットワーク (できればまったく異なる物理ネットワーク) を使うことができます。 ただし、VLAN ではセキュリティを強化することもできます。 この方法では、内部ネットワークリソースまたはサービスへの接続ができなくなったり、アクセスを回復するために追加のネットワーク構成が必要になることがあります。

また以下のことをお勧めします。
- [システムの定期的な更新プログラムをインストールする](manage-windows-updates-for-surface-hub.md) 
- Miracast 設定を更新して自動プレゼンテーションモードを無効にする

## 詳細情報

- [Wi-Fi Direct の仕様](http://www.wi-fi.org/discover-wi-fi/wi-fi-direct)
- [Wireless Protected Setup (WPS) の仕様](http://www.wi-fi.org/discover-wi-fi/wi-fi-protected-setup)



