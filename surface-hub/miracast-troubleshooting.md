---
title: Surface Hub での Miracast のトラブルシューティング
description: Surface Hub で Miracast の問題を解決する方法について説明します。
ms.prod: surface-hub
ms.sitesec: library
author: dansimp
ms.author: dansimp
ms.topic: article
ms.date: 06/20/2019
ms.reviewer: ''
manager: laurawi
ms.localizationpriority: medium
ms.openlocfilehash: 96c7c42fe0176f275a8657165d88bf447e57772b
ms.sourcegitcommit: 109d1d7608ac4667564fa5369e8722e569b8ea36
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/27/2020
ms.locfileid: "10836948"
---
# <span data-ttu-id="516db-103">Surface Hub での Miracast のトラブルシューティング</span><span class="sxs-lookup"><span data-stu-id="516db-103">Troubleshoot Miracast on Surface Hub</span></span>

<span data-ttu-id="516db-104">Surface Hub では、Miracast プロトコルを使ってワイヤレス プロジェクションをサポートします。</span><span class="sxs-lookup"><span data-stu-id="516db-104">Surface Hub supports wireless projection through the Miracast protocol.</span></span> <span data-ttu-id="516db-105">現在入手できる多くのワイヤレス モニターおよびアダプターでは、Miracast の本来の実装を使用します。</span><span class="sxs-lookup"><span data-stu-id="516db-105">Most wireless monitors and adapters available today use the original implementation of Miracast.</span></span> <span data-ttu-id="516db-106">Surface Hub では、**Miracast Autonomous Group Owner (AGO)** と呼ばれる、若干異なるバージョンの Miracast を使用します。</span><span class="sxs-lookup"><span data-stu-id="516db-106">Surface Hub uses a slightly different version of Miracast known as **Miracast Autonomous Group Owner (AGO)**.</span></span> <span data-ttu-id="516db-107">Surface Hub へのワイヤレス プロジェクションが失敗した場合の一般的なトラブルシューティングの手順は、別のワイヤレス モニターまたはアダプターへのプロジェクションをテストすることです。</span><span class="sxs-lookup"><span data-stu-id="516db-107">A common troubleshooting step when projecting wirelessly to Surface Hub fails is to test projecting to another wireless monitor or adapter.</span></span> <span data-ttu-id="516db-108">ただし、ほとんどの場合、これらのデバイスは Miracast AGO を使用しておらず、Surface Hub と同じ方法でワイヤレス プロジェクションを処理するわけではありません。</span><span class="sxs-lookup"><span data-stu-id="516db-108">However, in most cases, these devices are not using Miracast AGO and do not handle wireless projection the same way that Surface Hub does.</span></span>

<span data-ttu-id="516db-109">従来の Miracast では、プロジェクション元デバイスが Miracast に対応したモニターによって設定されたアクセス ポイントに接続した後、モニターが、プロジェクション元デバイスのネットワーク チャネルを使用して、プロジェクション元デバイスにトラフィックを送信します。</span><span class="sxs-lookup"><span data-stu-id="516db-109">In traditional Miracast, the projecting device will connect the access point set up by the Miracast-enabled monitor, and then the monitor will send traffic back to the projecting device using the network channel of the projecting device.</span></span> <span data-ttu-id="516db-110">Miracast AGO は 2 段階の接続プロセスです。</span><span class="sxs-lookup"><span data-stu-id="516db-110">Miracast AGO is a two-step connection process:</span></span>

- <span data-ttu-id="516db-111">最初の手順は、2.4 GHz を使用した初期接続です。</span><span class="sxs-lookup"><span data-stu-id="516db-111">The first step is an initial connection using 2.4GHz.</span></span> 
- <span data-ttu-id="516db-112">最初のハンドシェイクの後で、プロジェクション元デバイスは、モニターのワイヤレス チャネルの設定を使用して、モニターにトラフィックを送信します。</span><span class="sxs-lookup"><span data-stu-id="516db-112">After that initial handshake, the projecting device sends traffic to the monitor using the wireless channel settings on the monitor.</span></span> <span data-ttu-id="516db-113">Surface Hub が Wi‑Fi ネットワーク (アクセス ポイント) に接続されている場合は、接続されたネットワークと同じチャネルが使用されます。それ以外の場合は、設定で指定されている Miracast チャネルが使用されます。</span><span class="sxs-lookup"><span data-stu-id="516db-113">If Surface Hub is connected to a Wi-Fi network, the access point, it will use the same channel as the connected network, otherwise it will use the Miracast channel from Settings.</span></span>

<span data-ttu-id="516db-114">Surface Hub への Miracast の問題には、通常 2 つの種類があります。[接続](#connect-issues)と[パフォーマンス](#performance-issues)の問題です。</span><span class="sxs-lookup"><span data-stu-id="516db-114">There are generally two types of issues with Miracast to Surface Hub: [connection](#connect-issues) and [performance](#performance-issues).</span></span> <span data-ttu-id="516db-115">どちらの場合も、Surface Hub の場所でのワイヤレスネットワークアクティビティの一般的な画像を取得することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="516db-115">In either case, it is a good idea to get a general picture of wireless network activity in the Surface Hub's location.</span></span> <span data-ttu-id="516db-116">ネットワーク スキャン ツールを実行すると、環境内で使用可能なネットワークとチャネルの使用状況が示されます。</span><span class="sxs-lookup"><span data-stu-id="516db-116">Running a network scanning tool will show you the available networks and channel usage in the environment.</span></span>

## <span data-ttu-id="516db-117">接続の問題</span><span class="sxs-lookup"><span data-stu-id="516db-117">Connect issues</span></span>

<span data-ttu-id="516db-118">Surface Hub の設定で、Wi‑Fi と Miracast の両方が有効になっていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="516db-118">Ensure both Wi-Fi and Miracast are both enabled in Settings on Surface Hub.</span></span> 

<span data-ttu-id="516db-119">ネットワークのスキャンを実行した場合、Surface Hub Miracast がアクセス ポイントとして一覧に表示されます。</span><span class="sxs-lookup"><span data-stu-id="516db-119">If you ran a network scan, you should see Surface Hub Miracast listed as an access point.</span></span> <span data-ttu-id="516db-120">Surface Hub の Miracast ネットワークはスキャン時に表示されますが、利用可能なデバイスとして表示されない場合は、Surface Hub で使用される Miracast チャネルを調整してみてください。</span><span class="sxs-lookup"><span data-stu-id="516db-120">If Surface Hub's Miracast network shows up on the scan, but you cannot not see it as an available device, you can try to adjust the Miracast channel used by Surface Hub.</span></span> 

<span data-ttu-id="516db-121">Surface Hub が Wi‑Fi ネットワークに接続されている場合、Surface Hub は Wi-Fi アクセス ポイントと同じチャネル設定を Miracast アクセス ポイントに使用します。</span><span class="sxs-lookup"><span data-stu-id="516db-121">When Surface Hub is connected to a Wi-Fi network it will use the same channel settings as the Wi-Fi access point for its Miracast access point.</span></span> <span data-ttu-id="516db-122">トラブルシューティングのため、Surface Hub をすべての Wi‑Fi ネットワークから切断して (ただし、Wi‑Fi は有効にしたままで)、Miracast で使用するチャネルを制御できるようにします。</span><span class="sxs-lookup"><span data-stu-id="516db-122">For troubleshooting purposes, disconnect Surface Hub from any Wi-Fi networks (but keep Wi-Fi enabled), so you can control the channel used for Miracast.</span></span> <span data-ttu-id="516db-123">設定で、Miracast チャネルを手動で選択することができます。</span><span class="sxs-lookup"><span data-stu-id="516db-123">You can manually select the Miracast channel in Settings.</span></span> <span data-ttu-id="516db-124">変更するたびに Surface Hub を再起動する必要があります。</span><span class="sxs-lookup"><span data-stu-id="516db-124">You will need to restart Surface Hub after each change.</span></span> <span data-ttu-id="516db-125">一般的に、ネットワーク スキャンで使用率が高くないチャネルを使用します。</span><span class="sxs-lookup"><span data-stu-id="516db-125">Generally speaking, you will want to use channels that do not show heavy utilization from the network scan.</span></span>

<span data-ttu-id="516db-126">また、接続の問題は、接続されているデバイスの問題が原因で発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="516db-126">It is also possible that the connect issue can be the result of a problem on the connecting device.</span></span> <span data-ttu-id="516db-127">プロジェクション元デバイスが Windows を実行している場合、Miracast を完全にサポートするには Windows 8.1 以降である必要があります。</span><span class="sxs-lookup"><span data-stu-id="516db-127">If the projecting device is running Windows, it should be Windows 8.1 or newer for full Miracast support.</span></span> <span data-ttu-id="516db-128">繰り返しますが、トラブルシューティングのために、すべての Wi‑Fi ネットワークからプロジェクション元デバイスを切断してください。</span><span class="sxs-lookup"><span data-stu-id="516db-128">Again, for troubleshooting, disconnect the projecting device from any Wi-Fi networks.</span></span> <span data-ttu-id="516db-129">これにより、アクセス ポイント チャネルと、Surface Hub で設定された Miracast チャネルとのチャネル切り替えがなくなります。</span><span class="sxs-lookup"><span data-stu-id="516db-129">This will eliminate any channel switching between the access point channel and the Miracast channel set on Surface Hub.</span></span> <span data-ttu-id="516db-130">また、一部のグループ ポリシーとファイアウォールの設定が、Wi‑Fi ネットワークに関連付けられている可能性があります。</span><span class="sxs-lookup"><span data-stu-id="516db-130">Also, some Group Policy and firewall settings may be tied to a Wi-Fi network.</span></span>

### <span data-ttu-id="516db-131">ドライバーの確認</span><span class="sxs-lookup"><span data-stu-id="516db-131">Check drivers</span></span>

<span data-ttu-id="516db-132">また、プロジェクション元デバイスに、最新のドライバーと更新プログラムがインストールされていることを確認することもお勧めします。</span><span class="sxs-lookup"><span data-stu-id="516db-132">It is also a good idea to ensure the latest drivers and updates are installed on the projecting device.</span></span> <span data-ttu-id="516db-133">デバイス マネージャーで、Wi-Fi アダプターとビデオ アダプターを開き、更新されたドライバーのバージョンを確認します。</span><span class="sxs-lookup"><span data-stu-id="516db-133">In Device Manager, open the Wi-Fi adapter and video adapter and check for an updated driver version.</span></span> <span data-ttu-id="516db-134">Surface Pro 3 や Surface Pro 4 で古い Wi-Fi ドライバーを使用している場合、[修正プログラム 3120232](https://support.microsoft.com/help/3120232/poor-wireless-performance-on-5-ghz-connections-on-surface-pro-3-and-surface-3) を適用することを強くお勧めします。</span><span class="sxs-lookup"><span data-stu-id="516db-134">[Hotfix 3120232](https://support.microsoft.com/help/3120232/poor-wireless-performance-on-5-ghz-connections-on-surface-pro-3-and-surface-3) is highly recommended for Surface Pro 3 and Surface Pro 4 if they are on an older Wi-Fi driver.</span></span> 

### <span data-ttu-id="516db-135">Miracast のサポートの確認</span><span class="sxs-lookup"><span data-stu-id="516db-135">Check for Miracast support</span></span>

<span data-ttu-id="516db-136">次に、デバイスで Miracast がサポートされていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="516db-136">Next, ensure Miracast is supported on the device.</span></span> 

1. <span data-ttu-id="516db-137">Windows + R キーを押して「`dxdiag`」と入力します。</span><span class="sxs-lookup"><span data-stu-id="516db-137">Press Windows Key + R and type `dxdiag`.</span></span> 
2. <span data-ttu-id="516db-138">[情報をすべて保存] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="516db-138">Click "Save all information".</span></span> 
3. <span data-ttu-id="516db-139">保存した dxdiag.txt を開き、**Miracast** を検索します。</span><span class="sxs-lookup"><span data-stu-id="516db-139">Open the saved dxdiag.txt and find **Miracast**.</span></span> <span data-ttu-id="516db-140">"**Available, with HDCP**" と表示されることを確認します。</span><span class="sxs-lookup"><span data-stu-id="516db-140">It should say **Available, with HDCP**.</span></span> 
    
### <span data-ttu-id="516db-141">ファイアウォールの確認</span><span class="sxs-lookup"><span data-stu-id="516db-141">Check firewall</span></span>
    
<span data-ttu-id="516db-142">Windows ファイアウォールが、Miracast のトラフィックをブロックする場合があります。</span><span class="sxs-lookup"><span data-stu-id="516db-142">The Windows firewall can block Miracast traffic.</span></span> <span data-ttu-id="516db-143">最も簡単なテストは、ファイアウォールを無効にし、プロジェクションをテストします。</span><span class="sxs-lookup"><span data-stu-id="516db-143">The simplest test is to disable the firewall and test projection.</span></span> <span data-ttu-id="516db-144">ファイアウォールが無効にすると Miracast が動作する場合は、例外を追加します。</span><span class="sxs-lookup"><span data-stu-id="516db-144">If Miracast works with the firewall disabled, add an exception for</span></span>

    C:\Windows\System32\WUDFHost.exe
    Allow In/Out connections for TCP and UDP, Ports: All.

### <span data-ttu-id="516db-145">グループ ポリシー設定の確認</span><span class="sxs-lookup"><span data-stu-id="516db-145">Check Group Policy settings</span></span>

<span data-ttu-id="516db-146">ドメインに参加しているデバイスでは、グループ ポリシーが Miracast をブロックする場合もあります。</span><span class="sxs-lookup"><span data-stu-id="516db-146">On domain-joined devices, Group Policy can also block Miracast.</span></span> 

1. <span data-ttu-id="516db-147">Windows + R キーを押し、「`rsop.msc`」と入力して、を実行する、**ポリシーの結果セット** スナップインを実行します。</span><span class="sxs-lookup"><span data-stu-id="516db-147">Use the Windows Key + R and type `rsop.msc` to execute the **Resultant Set of Policy** snap-in.</span></span> <span data-ttu-id="516db-148">これにより、PC に適用されている現在のポリシーが表示されます。</span><span class="sxs-lookup"><span data-stu-id="516db-148">This will show the current policies applied to the PC.</span></span> 
2. <span data-ttu-id="516db-149">**[コンピュータの構成]** > **[Windows の設定]** > **[セキュリティの設定]** > **[ワイヤレス ネットワーク (IEEE 802.11) ポリシー]** を確認します。</span><span class="sxs-lookup"><span data-stu-id="516db-149">Review **Computer Configuration** > **Windows Settings** > **Security Settings** > **Wireless Network (IEEE 802.11) Policies**.</span></span> <span data-ttu-id="516db-150">ワイヤレス ポリシーの設定が表示されます。</span><span class="sxs-lookup"><span data-stu-id="516db-150">There should be a setting for wireless policies.</span></span> 
3. <span data-ttu-id="516db-151">ワイヤレス ポリシーの設定をダブルクリックすると、ダイアログ ボックスが表示されます。</span><span class="sxs-lookup"><span data-stu-id="516db-151">Double click the setting for wireless policies and a dialog box will appear.</span></span> 
4. <span data-ttu-id="516db-152">**[ネットワークのアクセス許可]** タブを開き、**[すべてのユーザー プロファイルをすべてのユーザーが作成できる]** を選択します。</span><span class="sxs-lookup"><span data-stu-id="516db-152">Open the **Network Permissions** tab and select **Allow everyone to create all user profiles**.</span></span>

### <span data-ttu-id="516db-153">イベント ログの確認</span><span class="sxs-lookup"><span data-stu-id="516db-153">Check event logs</span></span>

<span data-ttu-id="516db-154">確認する最後の場所はイベント ログ内です。</span><span class="sxs-lookup"><span data-stu-id="516db-154">The last place to check is in the Event logs.</span></span> <span data-ttu-id="516db-155">Miracast イベントは、**Wlanautoconfig** に記録されます。</span><span class="sxs-lookup"><span data-stu-id="516db-155">Miracast events will be logged to **Wlanautoconfig**.</span></span> <span data-ttu-id="516db-156">これは Surface Hub とプロジェクション元デバイスの両方に当てはまります。</span><span class="sxs-lookup"><span data-stu-id="516db-156">This is true on both Surface Hub and the projecting device.</span></span> <span data-ttu-id="516db-157">Surface Hub のログをエクスポートする場合は、Surface Hub の Wlanautoconfig を**WindowsEventLog**フォルダーに表示することができます。</span><span class="sxs-lookup"><span data-stu-id="516db-157">If you export Surface Hub logs, you can view Surface Hub's Wlanautoconfig in the **WindowsEventLog** folder.</span></span> <span data-ttu-id="516db-158">イベント ログ内のエラーが、接続が失敗した場所に関する追加の詳細情報を提供している場合があります。</span><span class="sxs-lookup"><span data-stu-id="516db-158">Errors in the event log can provide some additional details on where the connection fails.</span></span>

## <span data-ttu-id="516db-159">パフォーマンスの問題</span><span class="sxs-lookup"><span data-stu-id="516db-159">Performance issues</span></span>

<span data-ttu-id="516db-160">ワイヤレス プロジェクションが接続された後、パフォーマンスの問題によって遅延が発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="516db-160">After wireless projection is connected, it is possible to see performance issues causing latency.</span></span> <span data-ttu-id="516db-161">通常、これは、全体的なチャネル飽和状態またはチャネルの切り替えの原因となる状況による結果です。</span><span class="sxs-lookup"><span data-stu-id="516db-161">This is generally a result of overall channel saturation or a situation that causes channel switching.</span></span> 

<span data-ttu-id="516db-162">チャネルの飽和状態の場合は、ネットワーク スキャンを参照して、トラフィックが少ないチャネルを使用してみます。</span><span class="sxs-lookup"><span data-stu-id="516db-162">For channel saturation, refer to the network scan and try to use channels with less traffic.</span></span>

<span data-ttu-id="516db-163">チャネルの切り替えは、Wi-Fi アダプターが複数のチャネルにトラフィックを送信する必要がある場合に発生します。</span><span class="sxs-lookup"><span data-stu-id="516db-163">Channel switching is caused when the Wi-Fi adapter needs to send traffic to multiple channels.</span></span> <span data-ttu-id="516db-164">特定のチャンネルは、Dynamic Frequency Selection (DFS) をサポートします。</span><span class="sxs-lookup"><span data-stu-id="516db-164">Certain channels support Dynamic Frequency Selection (DFS).</span></span> <span data-ttu-id="516db-165">DFS はチャネル 49 ～ 148 で使用されます。</span><span class="sxs-lookup"><span data-stu-id="516db-165">DFS is used on channels 49 through 148.</span></span> <span data-ttu-id="516db-166">一部の Wi‑Fi ドライバーでは、DFS チャネルに接続されているときにパフォーマンスが低下します。</span><span class="sxs-lookup"><span data-stu-id="516db-166">Some Wi-Fi drivers will show poor performance when connected to a DFS channel.</span></span> <span data-ttu-id="516db-167">DFS チャネルに接続しているときに Miracast パフォーマンスが低下した場合は、DFS 以外のチャネルでプロジェクションを試してください。</span><span class="sxs-lookup"><span data-stu-id="516db-167">If you are seeing poor Miracast performance while connected to a DFS channel, try the projection on a non-DFS channel.</span></span> <span data-ttu-id="516db-168">Surface Hub とプロジェクション元デバイスの両方で、非 DFS チャネルを使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="516db-168">Both Surface Hub and projecting device should use non-DFS channels.</span></span>

<span data-ttu-id="516db-169">Surface Hub とプロジェクション元デバイスがどちらも Wi‑Fi に接続されているが、異なるアクセス ポイントと異なるチャネルを使用している場合、これにより、Miracast が接続されている間に、Surface Hub やプロジェクション元デバイスで強制的にチャネル切り替えが行われます。</span><span class="sxs-lookup"><span data-stu-id="516db-169">If Surface Hub and the projecting device are both connected to Wi-Fi but using different access points with different channels, this will force Surface Hub and the projecting device to channel switch while Miracast is connected.</span></span> <span data-ttu-id="516db-170">このため、ワイヤレス プロジェクションのパフォーマンスと Wi-Fi 経由のネットワーク パフォーマンスが低下します。</span><span class="sxs-lookup"><span data-stu-id="516db-170">This will result in both poor wireless project and poor network performance over Wi-Fi.</span></span> <span data-ttu-id="516db-171">チャネル切り替えは、ワイヤレス プロジェクションだけではなく、すべてのワイヤレス トラフィックのパフォーマンスに影響します。</span><span class="sxs-lookup"><span data-stu-id="516db-171">The channel switching will affect the performance of all wireless traffic, not just wireless projection.</span></span> 

<span data-ttu-id="516db-172">チャネル切り替えは、プロジェクション元デバイスが、Surface Hub で Miracast 用に使用するチャネルとは異なるチャネルを使用して Wi-Fi ネットワークに接続されている場合にも発生します。</span><span class="sxs-lookup"><span data-stu-id="516db-172">Channel switching will also occur if the projecting device is connected to an Wi-Fi network using a different channel than the channel that Surface Hub uses for Miracast.</span></span> <span data-ttu-id="516db-173">したがって、ベストプラクティスとしては、最もよく使用するアクセスポイントと同じチャネルに Surface Hub の Miracast チャネルを設定することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="516db-173">So, a best practice is to set Surface Hub's Miracast channel to the same channel as the most commonly used access point.</span></span> 

<span data-ttu-id="516db-174">環境に複数の Wi-Fi ネットワークまたはアクセス ポイントがある場合、一部のチャネル切り替えは回避できません。</span><span class="sxs-lookup"><span data-stu-id="516db-174">If there are multiple Wi-Fi networks or access points in the environment, some channel switching is unavoidable.</span></span> <span data-ttu-id="516db-175">これは、すべての Wi-Fi ドライバーを最新の状態にすることで適切に修正されます。</span><span class="sxs-lookup"><span data-stu-id="516db-175">This is best addressed by ensuring all Wi-Fi drivers are up to date.</span></span>

## <span data-ttu-id="516db-176">サポートに問い合わせ</span><span class="sxs-lookup"><span data-stu-id="516db-176">Contact Support</span></span>

<span data-ttu-id="516db-177">質問がある場合やヘルプが必要な場合は、[サポートリクエストを作成](https://support.microsoft.com/supportforbusiness/productselection)できます。</span><span class="sxs-lookup"><span data-stu-id="516db-177">If you have questions or need help, you can [create a support request](https://support.microsoft.com/supportforbusiness/productselection).</span></span>
